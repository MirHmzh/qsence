let move=1;let rand=0;let hist=0;let neg=[{top:"-=20%",left:"-=20%"},{left:"-=20%",right:"-=20%"},{right:"-=20%",bottom:"-=20%"},{bottom:"-=20%",left:"-=20%"},];let pos=[{top:"+=20%",left:"+=20%"},{left:"+=20%",right:"+=20%"},{right:"+=20%",bottom:"+=20%"},{bottom:"+=20%",left:"+=20%"},];function movebg(){$.each($("#moving-bg"),function(index,val){if(move==1){random=Math.floor(Math.random()*4);$(val).animate(pos[random],5000,"swing");move=2}else{$(val).animate(neg[random],5000,"swing");move=1}})}
function alerting(){let check=$('#active-tab').attr('data-absen');let alert_cap;let date=new Date();if(check=='in'){alert_cap='Check In'}else if(check=='out'){alert_cap='Check Out'}else{alert_cap='Check'}
var bMusic=new Audio("assets/audio/smongko.mp3");setTimeout(()=>{bMusic.play()},100);Swal.fire({title:'<span id="cswal-title">'+alert_cap+' : '+date.getHours()+':'+date.getMinutes()+'</span>',showConfirmButton:!1,timer:2000,icon:"success",backdrop:!1})}
function switchQr(){let qri_h=$("#qri").height();let qri_w=$("#qri").width();let brc_h=$(".barcode").height();let brc_w=$(".barcode").width();$(".barcode").height(brc_h);$(".barcode").width(brc_w);$("#qri").animate({opacity:0},{duration:100,queue:!1});$("#qri").animate({width:"0",height:"0","margin-top":$(".barcode").height()/2},{duration:300,queue:!1});setTimeout(()=>{$("#qri").animate({width:qri_w,height:qri_h,opacity:1,"margin-top":0},200,()=>{alerting()})},300)}
movebg();setInterval(()=>{movebg()},5000);$("#nav-shadow-mobile").position($("#active-tab-mobile").position());$("#nav-shadow-mobile").width($("#active-tab-mobile").width());$("#nav-shadow").position($("#active-tab").position());$("#nav-shadow").width($("#active-tab").width());$(".nav-link").click((e)=>{let past_width=$("#active-tab").width();$("#profile-btn").removeClass("active-tab");$("#active-tab").removeAttr("id");let el=e.target;let parent=$(el).parent();$(parent).attr("id","active-tab");let brc_h=$(".barcode").height();let brc_w=$(".barcode").width();let qri_h=$("#qri").height();let qri_w=$("#qri").width();$("#nav-shadow").animate({width:$("#active-tab").width(),top:$("#active-tab").position().top,left:$("#active-tab").position().left,height:$("#active-tab").height()},200,"swing");$("#main-content div").animate({opacity:0,"margin-left":"-10em"},200,()=>{let wrapper_h=$("#main-wrapper").height();if($(el).attr("data-target")!="content-tab-history"){if(hist==1){$("#main-wrapper div").animate({opacity:0,visibility:"hidden"},200,()=>{$("#main-wrapper").css({background:"none",padding:0}).html("");$("#main-wrapper").html($("#"+$(el).attr("data-wrapper")+"-wrapper").html());hist=0})}else{$(".barcode").height(brc_h);$(".barcode").width(brc_w);$("#qri").animate({opacity:0},{duration:100,queue:!1});$("#qri").animate({width:"0",height:"0","margin-top":$(".barcode").height()/2},{duration:300,queue:!1});setTimeout(()=>{$("#qri").animate({width:qri_w,height:qri_h,opacity:1,"margin-top":0},200)},300)}
$("#main-content").html('<div class="align-self-center" style="opacity: 0; margin-left: 10em">'+$("#"+$(el).attr("data-target")).html()+"</div>");$("#main-content div").animate({opacity:1,"margin-left":0},200)}else{$("#main-wrapper").css({height:""});$("#main-wrapper div").animate({opacity:0,visibility:"hidden"},200,()=>{$("#card-history").css({"max-height":wrapper_h});$("#main-wrapper").css({height:wrapper_h,"background-color":"#fff"}).html("");$("#main-wrapper").html($("#history-absen").html());hist=1})}})});$(window).resize(()=>{let cact_tab=$(".active-tab").length;let cact_tab_w=$(".active-tab").height();let shadow_w=$("#active-tab").width(),shadow_h=$("#active-tab").height(),shadow_t=$("#active-tab").position().top,shadow_l=$("#active-tab").position().left;$("#nav-shadow").css({width:shadow_w,height:shadow_h,top:shadow_t,left:shadow_l});$(".barcode").css({width:"",height:""});$("#qri").css({width:"",height:""});$("#main-wrapper").css({height:""})})